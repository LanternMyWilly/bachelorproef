{"ast":null,"code":"import { FormGroup, Validators } from '@angular/forms';\nimport ItemRequest from 'src/app/models/itemRequest';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./item-card/item-card.component\";\nfunction ItemsComponent_app_item_card_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-item-card\", 34);\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"item\", item_r4);\n  }\n}\nfunction ItemsComponent_p_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formErrors.name, \" \");\n  }\n}\nfunction ItemsComponent_p_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.formErrors.description, \" \");\n  }\n}\nfunction ItemsComponent_p_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.formErrors.price, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"border-red-500\": a0\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    \"text-red-500\": a0\n  };\n};\nexport class ItemsComponent {\n  constructor(service, fb) {\n    this.service = service;\n    this.fb = fb;\n    this.items = [];\n    this.itemForm = this.fb.group({\n      name: ['', [Validators.required, Validators.minLength(5)]],\n      description: ['', [Validators.required, Validators.minLength(10)]],\n      price: ['', [Validators.required, Validators.min(1)]],\n      isShared: [false]\n    });\n    this.validationMessages = {\n      name: {\n        required: 'That name is too short'\n      },\n      description: {\n        required: 'The provided description is too short',\n        mismatch: 'test'\n      },\n      price: {\n        length: \"Price can't be empty\",\n        nan: \"That's not a correct price format\"\n      }\n    };\n    this.formErrors = {\n      name: '',\n      description: '',\n      price: ''\n    };\n  }\n  onSubmit() {\n    this.handleAddItem();\n  }\n  handleAddItem() {\n    this.logValidationErrors();\n    if (this.itemForm.valid) {\n      const name = !!this.itemForm.value.name ? this.itemForm.value.name : '';\n      const description = !!this.itemForm.value.description ? this.itemForm.value.description : '';\n      const price = !!this.itemForm.value.price ? +this.itemForm.value.price : 0;\n      const isShared = !!this.itemForm.value.isShared ? this.itemForm.value.isShared : false;\n      const isPayedOff = false;\n      const iconPath = 'default';\n      const payedById = '00000000-0000-0000-0000-000000000001';\n      let item = new ItemRequest(name, description, price, iconPath, isShared, isPayedOff, payedById);\n      this.service.addItem(item).subscribe({\n        next: () => {\n          this.itemForm.reset();\n          this.ngOnInit;\n        }\n      });\n    }\n  }\n  logValidationErrors(group = this.itemForm) {\n    // get all root keys\n    Object.keys(group.controls).forEach(key => {\n      const abstractControl = group.get(key);\n      if (abstractControl instanceof FormGroup) {\n        this.logValidationErrors(abstractControl);\n      } else {\n        // @ts-ignore\n        this.formErrors[key] = '';\n        if (abstractControl && !abstractControl.valid && (abstractControl.touched || abstractControl.dirty)) {\n          // @ts-ignore\n          const messages = this.validationMessages[key];\n          for (const errorKey in abstractControl.errors) {\n            if (errorKey) {\n              // @ts-ignore\n              this.formErrors[key] += messages[errorKey] + ' ';\n            }\n          }\n        }\n      }\n    });\n  }\n  ngOnInit() {\n    this.service.loadItems().subscribe({\n      next: res => {\n        res.forEach((c, index) => {\n          if (index !== 0) {\n            this.items.push(c);\n          }\n        });\n      }\n    });\n  }\n}\nItemsComponent.ɵfac = function ItemsComponent_Factory(t) {\n  return new (t || ItemsComponent)(i0.ɵɵdirectiveInject(i1.Service), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nItemsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ItemsComponent,\n  selectors: [[\"app-items\"]],\n  decls: 46,\n  vars: 23,\n  consts: [[1, \"w-full\", \"h-full\", \"flex\", \"flex-col\", \"items-center\"], [1, \"w-full\", \"flex\", \"flex-col\", \"items-center\", \"text-gray-700\"], [1, \"text-5xl\", \"uppercase\", \"font-semibold\", \"mb-2\"], [1, \"w-full\", \"mt-10\", \"pb-10\", \"flex\", \"justify-center\", \"flex-wrap\", \"gap-10\", \"overflow-auto\"], [3, \"item\", 4, \"ngFor\", \"ngForOf\"], [\"title\", \"Add item\", \"data-modal-target\", \"default\", \"data-modal-toggle\", \"addModal\", \"type\", \"button\", 1, \"fixed\", \"z-10\", \"top-20\", \"right-8\", \"uppercase\", \"bg-gray-600\", \"rounded-lg\", \"py-2\", \"px-5\", \"flex\", \"justify-center\", \"items-center\", \"text-white\", \"text-2xl\", \"hover:bg-gray-700\"], [\"id\", \"addModal\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", 1, \"fixed\", \"top-0\", \"left-0\", \"right-0\", \"z-50\", \"hidden\", \"w-full\", \"p-4\", \"overflow-x-hidden\", \"overflow-y-auto\", \"md:inset-0\", \"h-modal\", \"md:h-full\"], [1, \"relative\", \"w-full\", \"h-full\", \"max-w-2xl\", \"md:h-auto\"], [1, \"relative\", \"bg-white\", \"rounded-lg\", \"shadow\", \"p-6\"], [\"type\", \"button\", \"data-modal-hide\", \"addModal\", 1, \"text-gray-400\", \"bg-transparent\", \"hover:bg-gray-200\", \"hover:text-gray-900\", \"rounded-lg\", \"text-sm\", \"p-1.5\", \"absolute\", \"right-2\", \"top-2\", \"inline-flex\", \"items-center\"], [\"aria-hidden\", \"true\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-5\", \"h-5\"], [\"fill-rule\", \"evenodd\", \"d\", \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\", \"clip-rule\", \"evenodd\"], [1, \"sr-only\"], [1, \"uppercase\"], [1, \"text-2xl\", \"mb-3\"], [3, \"formGroup\"], [1, \"relative\", \"z-0\", \"w-full\", \"mb-6\", \"group\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-700\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-gray-600\", \"peer\", 3, \"ngClass\"], [\"htmlFor\", \"name\", 1, \"peer-focus:font-medium\", \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-gray-600\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\", 3, \"ngClass\"], [\"class\", \"mt-2 text-sm text-red-600\", 4, \"ngIf\"], [\"name\", \"description\", \"id\", \"description\", \"rows\", \"4\", \"formControlName\", \"description\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-700\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-gray-600\", \"peer\", 3, \"ngClass\"], [\"htmlFor\", \"description\", 1, \"peer-focus:font-medium\", \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-gray-600\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\", 3, \"ngClass\"], [1, \"w-full\", \"mb-6\", \"flex\", \"flex-col\", \"justify-center\"], [1, \"w-full\", \"flex\", \"items-center\"], [1, \"z-0\", \"mr-6\", \"group\"], [1, \"flex\"], [1, \"inline-flex\", \"items-center\", \"px-3\", \"text-sm\", \"text-gray-900\", \"bg-gray-200\", \"border\", \"border-r-0\", \"border-gray-300\", \"rounded-l-md\", 3, \"ngClass\"], [\"type\", \"text\", \"id\", \"price\", \"name\", \"price\", \"formControlName\", \"price\", \"placeholder\", \"price\", 1, \"rounded-none\", \"rounded-r-lg\", \"bg-gray-50\", \"border\", \"text-gray-900\", \"focus:ring-gray-500\", \"focus:border-gray-500\", \"block\", \"flex-1\", \"min-w-0\", \"w-full\", \"text-sm\", \"border-gray-300\", \"p-2.5\", 3, \"ngClass\"], [1, \"z-0\", \"group\"], [1, \"relative\", \"inline-flex\", \"items-center\", \"cursor-pointer\"], [\"type\", \"checkbox\", \"value\", \"\", \"formControlName\", \"isShared\", \"id\", \"isShared\", \"name\", \"isShared\", 1, \"sr-only\", \"peer\"], [1, \"w-11\", \"h-6\", \"bg-gray-200\", \"rounded-full\", \"peer\", \"peer-focus:ring-4\", \"peer-focus:ring-gray-300\", \"peer-checked:after:translate-x-full\", \"peer-checked:after:border-white\", \"after:content-['']\", \"after:absolute\", \"after:top-0.5\", \"after:left-[2px]\", \"after:bg-white\", \"after:border-gray-300\", \"after:border\", \"after:rounded-full\", \"after:h-5\", \"after:w-5\", \"after:transition-all\", \"peer-checked:bg-gray-600\"], [1, \"ml-3\", \"text-sm\", \"text-gray-700\"], [\"type\", \"submit\", 1, \"text-white\", \"bg-gray-700\", \"hover:bg-gray-800\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-gray-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"w-full\", \"sm:w-auto\", \"px-5\", \"py-2.5\", \"text-center\", 3, \"click\"], [3, \"item\"], [1, \"mt-2\", \"text-sm\", \"text-red-600\"]],\n  template: function ItemsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Items\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵtemplate(5, ItemsComponent_app_item_card_5_Template, 1, 1, \"app-item-card\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵtext(7, \" Add item\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"button\", 9);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(12, \"svg\", 10);\n      i0.ɵɵelement(13, \"path\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(14, \"span\", 12);\n      i0.ɵɵtext(15, \"Close modal\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 13)(17, \"h1\", 14);\n      i0.ɵɵtext(18, \"add item\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"form\", 15)(20, \"div\", 16);\n      i0.ɵɵelement(21, \"input\", 17);\n      i0.ɵɵelementStart(22, \"label\", 18);\n      i0.ɵɵtext(23, \" item name \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, ItemsComponent_p_24_Template, 2, 1, \"p\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 16);\n      i0.ɵɵelement(26, \"textarea\", 20);\n      i0.ɵɵelementStart(27, \"label\", 21);\n      i0.ɵɵtext(28, \" description \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(29, ItemsComponent_p_29_Template, 2, 1, \"p\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 22)(31, \"div\", 23)(32, \"div\", 24)(33, \"div\", 25)(34, \"span\", 26);\n      i0.ɵɵtext(35, \" \\u20AC \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(36, \"input\", 27);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(37, \"div\", 28)(38, \"label\", 29);\n      i0.ɵɵelement(39, \"input\", 30)(40, \"div\", 31);\n      i0.ɵɵelementStart(41, \"span\", 32);\n      i0.ɵɵtext(42, \"This is a shared item\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(43, ItemsComponent_p_43_Template, 2, 1, \"p\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"button\", 33);\n      i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_44_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(45, \" Add item \");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.items);\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"formGroup\", ctx.itemForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx.formErrors.name));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c1, ctx.formErrors.name));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.formErrors.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(15, _c0, ctx.formErrors.description));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c1, ctx.formErrors.description));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.formErrors.description);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(19, _c0, ctx.formErrors.price));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(21, _c0, ctx.formErrors.price));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.formErrors.price);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i4.ItemCardComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpdGVtcy5jb21wb25lbnQuY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9pdGVtcy9pdGVtcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxnS0FBZ0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormGroup","Validators","ItemRequest","i0","ItemsComponent","constructor","service","fb","group","name","required","minLength","description","price","min","isShared","mismatch","length","nan","onSubmit","handleAddItem","logValidationErrors","itemForm","valid","value","isPayedOff","iconPath","payedById","item","addItem","subscribe","next","reset","ngOnInit","Object","keys","controls","forEach","key","abstractControl","get","formErrors","touched","dirty","messages","validationMessages","errorKey","errors","loadItems","res","c","index","items","push","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/florianserneels/Documents/PutridGrove/Angular/putrid-grove-angular/src/app/components/items/items.component.ts","/Users/florianserneels/Documents/PutridGrove/Angular/putrid-grove-angular/src/app/components/items/items.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport Item from 'src/app/models/item';\nimport { Service } from 'src/app/services/service';\nimport { ChangeDetectionStrategy, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport User from 'src/app/models/user';\nimport ItemRequest from 'src/app/models/itemRequest';\n\n@Component({\n  selector: 'app-items',\n  templateUrl: './items.component.html',\n  styleUrls: ['./items.component.css'],\n})\nexport class ItemsComponent implements OnInit {\n  public items: Item[] = [];\n\n  constructor(public service: Service, private fb: FormBuilder) {}\n\n  itemForm = this.fb.group({\n    name: ['', [Validators.required, Validators.minLength(5)]],\n    description: ['', [Validators.required, Validators.minLength(10)]],\n    price: ['', [Validators.required, Validators.min(1)]],\n    isShared: [false],\n  });\n\n  onSubmit(): void {\n    this.handleAddItem();\n  }\n\n  handleAddItem() {\n    this.logValidationErrors();\n\n    if (this.itemForm.valid) {\n      const name = !!this.itemForm.value.name ? this.itemForm.value.name! : '';\n      const description = !!this.itemForm.value.description\n        ? this.itemForm.value.description!\n        : '';\n      const price = !!this.itemForm.value.price\n        ? +this.itemForm.value.price!\n        : 0;\n      const isShared = !!this.itemForm.value.isShared\n        ? this.itemForm.value.isShared!\n        : false;\n      const isPayedOff = false;\n      const iconPath = 'default';\n      const payedById = '00000000-0000-0000-0000-000000000001';\n\n      let item = new ItemRequest(\n        name,\n        description,\n        price,\n        iconPath,\n        isShared,\n        isPayedOff,\n        payedById\n      );\n\n      this.service.addItem(item).subscribe({\n        next: () => {\n          this.itemForm.reset();\n          this.ngOnInit;\n        },\n      });\n    }\n  }\n\n  logValidationErrors(group: FormGroup = this.itemForm): void {\n    // get all root keys\n    Object.keys(group.controls).forEach((key: string) => {\n      const abstractControl = group.get(key);\n      if (abstractControl instanceof FormGroup) {\n        this.logValidationErrors(abstractControl);\n      } else {\n        // @ts-ignore\n        this.formErrors[key] = '';\n        if (\n          abstractControl &&\n          !abstractControl.valid &&\n          (abstractControl.touched || abstractControl.dirty)\n        ) {\n          // @ts-ignore\n          const messages = this.validationMessages[key];\n          for (const errorKey in abstractControl.errors) {\n            if (errorKey) {\n              // @ts-ignore\n              this.formErrors[key] += messages[errorKey] + ' ';\n            }\n          }\n        }\n      }\n    });\n  }\n\n  validationMessages = {\n    name: {\n      required: 'That name is too short',\n    },\n    description: {\n      required: 'The provided description is too short',\n      mismatch: 'test',\n    },\n    price: {\n      length: \"Price can't be empty\",\n      nan: \"That's not a correct price format\",\n    },\n  };\n  formErrors = {\n    name: '',\n    description: '',\n    price: '',\n  };\n\n  ngOnInit(): void {\n    this.service.loadItems().subscribe({\n      next: (res) => {\n        res.forEach((c: any, index: number) => {\n          if (index !== 0) {\n            this.items.push(c);\n          }\n        });\n      },\n    });\n  }\n}\n","<div class=\"w-full h-full flex flex-col items-center\">\n  <div class=\"w-full flex flex-col items-center text-gray-700\">\n    <h1 class=\"text-5xl uppercase font-semibold mb-2\">Items</h1>\n  </div>\n  <div\n    class=\"w-full mt-10 pb-10 flex justify-center flex-wrap gap-10 overflow-auto\"\n  >\n    <app-item-card *ngFor=\"let item of items\" [item]=\"item\"></app-item-card>\n  </div>\n</div>\n<button\n  title=\"Add item\"\n  class=\"fixed z-10 top-20 right-8 uppercase bg-gray-600 rounded-lg py-2 px-5 flex justify-center items-center text-white text-2xl hover:bg-gray-700\"\n  data-modal-target=\"default\"\n  data-modal-toggle=\"addModal\"\n  type=\"button\"\n>\n  Add item\n</button>\n\n<!-- Main modal -->\n<div\n  id=\"addModal\"\n  tabindex=\"-1\"\n  aria-hidden=\"true\"\n  class=\"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full\"\n>\n  <div class=\"relative w-full h-full max-w-2xl md:h-auto\">\n    <!-- Modal content -->\n    <div class=\"relative bg-white rounded-lg shadow p-6\">\n      <!-- Modal header -->\n      <button\n        type=\"button\"\n        class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute right-2 top-2 inline-flex items-center\"\n        data-modal-hide=\"addModal\"\n      >\n        <svg\n          aria-hidden=\"true\"\n          class=\"w-5 h-5\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n            clip-rule=\"evenodd\"\n          ></path>\n        </svg>\n        <span class=\"sr-only\">Close modal</span>\n      </button>\n      <div class=\"uppercase\">\n        <h1 class=\"text-2xl mb-3\">add item</h1>\n      </div>\n      <!-- Modal body -->\n      <form [formGroup]=\"itemForm\">\n        <div class=\"relative z-0 w-full mb-6 group\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            id=\"name\"\n            formControlName=\"name\"\n            class=\"block py-2.5 px-0 w-full text-sm text-gray-700 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-gray-600 peer\"\n            placeholder=\" \"\n            [ngClass]=\"{ 'border-red-500': formErrors.name }\"\n          />\n          <label\n            htmlFor=\"name\"\n            class=\"peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-gray-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\"\n            [ngClass]=\"{ 'text-red-500': formErrors.name }\"\n          >\n            item name\n          </label>\n          <p *ngIf=\"formErrors.name\" class=\"mt-2 text-sm text-red-600\">\n            {{ formErrors.name }}\n          </p>\n        </div>\n        <div class=\"relative z-0 w-full mb-6 group\">\n          <textarea\n            name=\"description\"\n            id=\"description\"\n            rows=\"4\"\n            formControlName=\"description\"\n            class=\"block py-2.5 px-0 w-full text-sm text-gray-700 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-gray-600 peer\"\n            [ngClass]=\"{ 'border-red-500': formErrors.description }\"\n            placeholder=\" \"\n          ></textarea>\n          <label\n            htmlFor=\"description\"\n            class=\"peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-gray-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\"\n            [ngClass]=\"{ 'text-red-500': formErrors.description }\"\n          >\n            description\n          </label>\n          <p *ngIf=\"formErrors.description\" class=\"mt-2 text-sm text-red-600\">\n            {{ formErrors.description }}\n          </p>\n        </div>\n        <div class=\"w-full mb-6 flex flex-col justify-center\">\n          <div class=\"w-full flex items-center\">\n            <div class=\"z-0 mr-6 group\">\n              <div class=\"flex\">\n                <span\n                  class=\"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md\"\n                  [ngClass]=\"{ 'border-red-500': formErrors.price }\"\n                >\n                  €\n                </span>\n                <input\n                  type=\"text\"\n                  id=\"price\"\n                  name=\"price\"\n                  formControlName=\"price\"\n                  class=\"rounded-none rounded-r-lg bg-gray-50 border text-gray-900 focus:ring-gray-500 focus:border-gray-500 block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5\"\n                  [ngClass]=\"{ 'border-red-500': formErrors.price }\"\n                  placeholder=\"price\"\n                />\n              </div>\n            </div>\n            <div class=\"z-0 group\">\n              <label class=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"\"\n                  formControlName=\"isShared\"\n                  class=\"sr-only peer\"\n                  id=\"isShared\"\n                  name=\"isShared\"\n                />\n                <div\n                  class=\"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-gray-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600\"\n                ></div>\n                <span class=\"ml-3 text-sm text-gray-700\"\n                  >This is a shared item</span\n                >\n              </label>\n            </div>\n          </div>\n          <p *ngIf=\"formErrors.price\" class=\"mt-2 text-sm text-red-600\">\n            {{ formErrors.price }}\n          </p>\n        </div>\n        <button\n          type=\"submit\"\n          class=\"text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center\"\n          (click)=\"onSubmit()\"\n        >\n          Add item\n        </button>\n      </form>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}